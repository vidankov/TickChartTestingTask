<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:UTS.AvaloniaUI.ComponentTask1.ViewModels"
        xmlns:tc="clr-namespace:UTS.AvalonaiUI.ComponentTask1.TickChartControl;assembly=TickChartControl"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:behaviors="clr-namespace:UTS.AvaloniaUI.ComponentTask1.Behaviors"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="UTS.AvaloniaUI.ComponentTask1.Views.MainWindow"
        Icon="/Assets/avalonia-logo.ico"
        Title="TickChart Demo"
        x:DataType="vm:MainWindowViewModel"
        behaviors:TestBenchBehavior.IsEnabled="{Binding IsTestBenchEnabled}">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <DockPanel>
        <!-- Панель управления - закрепляем сверху -->
        <StackPanel DockPanel.Dock="Top" 
                    Orientation="Horizontal" 
                    Margin="15" 
                    Spacing="20">
            
            <!-- Кнопка Start/Stop -->
            <Button Content="{Binding ButtonText}" 
                    Command="{Binding StartStopCommand}"
                    Width="80" 
                    Height="30"
                    FontSize="12"/>
            
            <!-- Настройка MaxVisibleTicks -->
            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                <TextBlock Text="Max Ticks:" 
                           VerticalAlignment="Center"
                           FontSize="12"/>
                <NumericUpDown x:Name="MaxTicksControl"
                              Value="{Binding MaxVisibleTicks, Mode=TwoWay}" 
                              Minimum="100" 
                              Maximum="1000" 
                              Increment="50"
                              Width="125"
                              Height="28"
                              FormatString="N0"
                              Foreground="Black"
                              Background="White"
                              BorderThickness="1"
                              BorderBrush="Gray"
                              HorizontalContentAlignment="Center"
                              VerticalContentAlignment="Center"/>
            </StackPanel>

            <!-- Выбор темы -->
            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                <TextBlock Text="Theme:" 
                           VerticalAlignment="Center"
                           FontSize="12"/>
                <ComboBox SelectedItem="{Binding SelectedTheme}"
                          ItemsSource="{Binding AvailableThemes}"
                          Width="100"
                          Height="28"/>
            </StackPanel>

            <!-- ПАНЕЛЬ БЕНЧМАРКА -->
            <StackPanel Orientation="Horizontal" 
                        Spacing="8" 
                        VerticalAlignment="Center">
                <CheckBox Content="Benchmark"
                          IsChecked="{Binding IsTestBenchEnabled}"
                          ToolTip.Tip="Включить/выключить мониторинг производительности"/>
                
                <!-- СТАТИСТИКА (видна только при включенном бенчмарке) -->
                <StackPanel Orientation="Horizontal" 
                           Spacing="15" 
                           IsVisible="{Binding IsTestBenchEnabled}">
                    <StackPanel Orientation="Vertical" Spacing="2">
                        <TextBlock Text="Total Ticks:" 
                                   FontSize="10" 
                                   Foreground="Gray"/>
                        <TextBlock x:Name="TotalTicksText"
                                   Text="0"
                                   FontSize="10" 
                                   FontWeight="Bold"/>
                    </StackPanel>
                    <StackPanel Orientation="Vertical" Spacing="2">
                        <TextBlock Text="TPS:" 
                                   FontSize="10" 
                                   Foreground="Gray"/>
                        <TextBlock x:Name="TpsText"
                                   Text="0"
                                   FontSize="10" 
                                   FontWeight="Bold"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </StackPanel>

        <!-- TickChart компонент - занимает всё оставшееся пространство -->
		<ContentControl Content="{Binding TickChartControl}" Margin="10"/>
    </DockPanel>
</Window>